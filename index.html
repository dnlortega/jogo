<!DOCTYPE html>
<html lang="pt-BR" >
<head>
  <meta charset="UTF-8" />
  <title>Monopoly Cont√°bil com Sidebar de Ranking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #e7f0fd;
      color: #222;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      user-select: none;
    }

    /* Container geral com sidebar */
    #app {
      display: flex;
      max-width: 1000px;
      width: 100%;
      gap: 1rem;
      padding: 1rem;
      box-sizing: border-box;
      position: relative;
    }

    /* Conte√∫do principal com tabuleiro e config */
    #container {
      flex-grow: 1;
      max-width: 700px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 12px 25px rgba(0,0,0,0.15);
      padding: 1rem 1.5rem 5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    /* Tabuleiro */
    #tabuleiro {
      display: grid;
      grid-template-columns: repeat(11, 1fr);
      grid-template-rows: repeat(11, 1fr);
      gap: 3px;
      width: 100%;
      max-width: 100vw;
      max-height: 100vw;
      aspect-ratio: 1 / 1;
      margin-bottom: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 15px #1e90ff66;
      background: #f0f4f9;
    }

    /* Ranking sidebar fixa */
    #ranking {
      width: 280px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 14px 30px rgba(0,0,0,0.15);
      padding: 1rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      position: sticky;
      top: 20px;
      align-self: flex-start;
    }
    #ranking h2 {
      margin: 0 0 0.8rem;
      color: #0a3d62;
      text-shadow: 1px 1px 2px #a4b0be;
      font-weight: 800;
      font-size: 1.5rem;
    }
    .player-rank {
      background: #f0f7ff;
      border-radius: 12px;
      box-shadow: inset 2px 2px 6px #c7d9ff,
                  inset -2px -2px 6px #ffffff;
      padding: 0.7rem 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      font-weight: 700;
      color: #1e3c72;
      border-left: 6px solid transparent;
      transition: background 0.3s ease;
    }
    .player-rank:hover {
      background: #d2e3ff;
      border-left-color: #1e90ff;
      cursor: default;
    }
    .player-rank .avatar {
      font-size: 2.3rem;
      text-shadow: 1px 1px 2px #8fbaff;
      width: 48px;
      text-align: center;
    }
    .player-rank .info {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      flex-grow: 1;
    }
    .player-rank .info .name {
      font-size: 1.2rem;
      color: #0a3d62;
      font-weight: 800;
    }
    .player-rank .info .score {
      font-size: 1rem;
      color: #4a6ca8;
      font-weight: 600;
    }
    .player-rank .pos {
      font-weight: 900;
      font-size: 1.4rem;
      width: 28px;
      text-align: center;
      color: #0a3d62;
    }

    /* Painel inferior fixo */
    #painel {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 700px;
      background: #0a3d62;
      color: white;
      padding: 0.9rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 -3px 10px #113f7dcc;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      font-weight: 600;
      user-select: none;
      z-index: 10;
    }
    #status {
      font-size: 1em;
      max-width: 65%;
      word-wrap: break-word;
    }
    #painel button {
      background: #1e90ff;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1.2em;
      padding: 0.6rem 1.3rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 5px 15px #1e90ffaa;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    #painel button:hover {
      background: #1266cc;
      box-shadow: 0 7px 20px #1266ccbb;
    }
    #painel button:active {
      background: #0a3d62;
      box-shadow: none;
    }

    /* Formul√°rio configura√ß√£o */
    #config {
      width: 100%;
      max-width: 480px;
      background: white;
      padding: 1.5rem 2rem 2rem;
      border-radius: 12px;
      box-shadow: 0 12px 25px rgba(0,0,0,0.12);
      margin-bottom: 2rem;
      user-select: none;
    }
    #config h2 {
      margin-bottom: 0.5rem;
      color: #0a3d62;
      text-shadow: 1px 1px 2px #a4b0be;
    }
    #config p {
      font-size: 0.9rem;
      margin-bottom: 1rem;
      color: #334d6e;
    }
    #config input {
      width: 100%;
      font-size: 1.1em;
      padding: 0.7rem 1rem;
      margin-bottom: 1rem;
      border-radius: 8px;
      border: 2px solid #a4b0be;
      transition: border-color 0.3s ease;
      outline-offset: 2px;
      outline-color: transparent;
      color: #0a3d62;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    #config input::placeholder {
      color: #a4b0be;
      font-weight: 500;
    }
    #config input:focus {
      border-color: #1e90ff;
      outline-color: #1e90ff;
    }
    #config button {
      width: 100%;
      background: #1e90ff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 0.8rem;
      font-size: 1.2em;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 18px #1e90ffaa;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    #config button:hover {
      background: #1266cc;
      box-shadow: 0 10px 25px #1266ccbb;
    }
    #config button:active {
      background: #0a3d62;
      box-shadow: none;
    }
    #error {
      color: #cc4444;
      font-weight: 700;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
      min-height: 1.3em;
      text-align: center;
      user-select: none;
    }

    /* Casas categoria */
    .casa.imposto {
      background: linear-gradient(145deg, #ffd6d6, #ff9a9a);
      border-color: #ff5c5c;
      color: #7a0000;
    }
    .casa.auditoria {
      background: linear-gradient(145deg, #c6deff, #7abaff);
      border-color: #2b87ff;
      color: #003d7a;
    }
    .casa.custos {
      background: linear-gradient(145deg, #d4f4d7, #91d77f);
      border-color: #53a938;
      color: #2f5600;
    }
    .casa.relatorio {
      background: linear-gradient(145deg, #fff8cc, #ffe066);
      border-color: #ffdb4d;
      color: #7a6b00;
    }
    .casa.outros {
      background: linear-gradient(145deg, #e4e5e7, #b3b5b9);
      border-color: #8f9297;
      color: #42464b;
    }

    /* √çcones e texto dentro casas */
    .casa .icon {
      font-size: 1.6em;
      margin-bottom: 4px;
      filter: drop-shadow(0 0 1px #4267b2);
      user-select: none;
    }
    .casa div {
      font-size: 0.75em;
      line-height: 1.1em;
    }
    .jogador {
      font-size: 1.3em;
      font-weight: 700;
      line-height: 1.1em;
      margin-top: 6px;
      color: #0a3d62;
      text-shadow: 1px 1px 1px #a0b8ff;
      word-break: break-word;
      user-select: none;
    }

    /* Responsive mobile */
    @media (max-width: 900px) {
      #app {
        flex-direction: column;
        padding: 0.5rem 0.5rem 4rem;
      }
      #ranking {
        width: 100%;
        max-height: none;
        position: relative;
        top: auto;
        margin-bottom: 1rem;
      }
      #container {
        max-width: 100vw;
        padding-bottom: 5rem;
        margin-bottom: 0;
      }
      #painel {
        max-width: 100vw !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="container">
      <div id="config">
        <h2>Configurar Jogadores</h2>
        <p>Digite os nomes dos jogadores (m√≠nimo 2, m√°ximo 4):</p>
        <input type="text" id="player1" placeholder="Nome do jogador 1" />
        <input type="text" id="player2" placeholder="Nome do jogador 2" />
        <input type="text" id="player3" placeholder="Nome do jogador 3 (opcional)" />
        <input type="text" id="player4" placeholder="Nome do jogador 4 (opcional)" />
        <button onclick="startGame()">Come√ßar Jogo</button>
        <p id="error"></p>
      </div>

      <h1 style="display:none;">Monopoly Cont√°bil</h1>
      <div id="tabuleiro" style="display:none;"></div>
    </div>

    <aside id="ranking" style="display:none;">
      <h2>Ranking</h2>
      <div id="ranking-list"></div>
    </aside>
  </div>

  <div id="painel" style="display:none;">
    <p id="status"></p>
    <button onclick="jogar()">üé≤ Jogar Dado</button>
  </div>

  <script>
    let nomesJogadores = [];
    let avatares = ["üòÄ", "üòé", "ü§ì", "ü§ë"];
    let posicoes = [];
    let dinheiro = [];
    let jogadorAtual = 0;

    const casas = [
      {nome: "Imposto de Renda", valor: -200, categoria:"imposto", icon:"üí∏"},
      {nome: "Auditoria Fiscal", valor: -150, categoria:"auditoria", icon:"üïµÔ∏è‚Äç‚ôÇÔ∏è"},
      {nome: "Contabilidade de Custos", valor: 100, categoria:"custos", icon:"üìä"},
      {nome: "Balancete", valor: 50, categoria:"relatorio", icon:"üìà"},
      {nome: "Escritura√ß√£o Fiscal", valor: -100, categoria:"imposto", icon:"üßæ"},
      {nome: "Concilia√ß√£o Banc√°ria", valor: 200, categoria:"custos", icon:"üè¶"},
      {nome: "Planejamento Tribut√°rio", valor: 150, categoria:"imposto", icon:"üóÇÔ∏è"},
      {nome: "An√°lise de Balan√ßos", valor: -50, categoria:"relatorio", icon:"üîç"},
      {nome: "Folha de Pagamento", valor: -100, categoria:"custos", icon:"üí∞"},
      {nome: "Controle Patrimonial", valor: 200, categoria:"custos", icon:"üè¢"},
      {nome: "Invent√°rio", valor: -50, categoria:"auditoria", icon:"üì¶"},
      {nome: "Auditoria Interna", valor: -150, categoria:"auditoria", icon:"üßê"},
      {nome: "Relat√≥rio Gerencial", valor: 100, categoria:"relatorio", icon:"üìë"},
      {nome: "ICMS", valor: -200, categoria:"imposto", icon:"üè∑Ô∏è"},
      {nome: "ISS", valor: -100, categoria:"imposto", icon:"üõéÔ∏è"},
      {nome: "PIS/COFINS", valor: -150, categoria:"imposto", icon:"üìÉ"},
      {nome: "Nota Fiscal Eletr√¥nica", valor: 50, categoria:"custos", icon:"üíª"},
      {nome: "An√°lise de Demonstrativos", valor: 100, categoria:"relatorio", icon:"üìã"},
      {nome: "DRE", valor: 200, categoria:"relatorio", icon:"üìä"},
      {nome: "Balan√ßo Patrimonial", valor: 300, categoria:"relatorio", icon:"üèõÔ∏è"},
      {nome: "IRPJ", valor: -200, categoria:"imposto", icon:"üíµ"},
      {nome: "Lucro Real", valor: 150, categoria:"custos", icon:"üìà"},
      {nome: "Lucro Presumido", valor: 100, categoria:"custos", icon:"üìâ"},
      {nome: "DCTF", valor: -150, categoria:"imposto", icon:"üìÇ"},
      {nome: "SPED Cont√°bil", valor: -100, categoria:"auditoria", icon:"üñ•Ô∏è"},
      {nome: "SPED Fiscal", valor: -200, categoria:"imposto", icon:"üñ®Ô∏è"},
      {nome: "Simples Nacional", valor: 200, categoria:"custos", icon:"üßÆ"},
      {nome: "Encerramento de Exerc√≠cio", valor: 100, categoria:"relatorio", icon:"üìÜ"},
      {nome: "Ativo Imobilizado", valor: -150, categoria:"custos", icon:"üèóÔ∏è"},
      {nome: "Controle de Estoque", valor: 150, categoria:"custos", icon:"üì¶"},
      {nome: "Auditoria Externa", valor: -200, categoria:"auditoria", icon:"üîé"},
      {nome: "Custo de Produ√ß√£o", valor: 100, categoria:"custos", icon:"üè≠"},
      {nome: "Margem de Contribui√ß√£o", valor: 200, categoria:"custos", icon:"üíπ"},
      {nome: "Ponto de Equil√≠brio", valor: 150, categoria:"custos", icon:"‚öñÔ∏è"},
      {nome: "Provis√µes Cont√°beis", valor: -100, categoria:"auditoria", icon:"üìú"},
      {nome: "Obriga√ß√µes Trabalhistas", valor: -150, categoria:"imposto", icon:"üßæ"},
      {nome: "Despesas Antecipadas", valor: 50, categoria:"custos", icon:"üí≥"},
      {nome: "Receitas Diferidas", valor: 100, categoria:"relatorio", icon:"üìÑ"},
      {nome: "Ajustes Cont√°beis", valor: -50, categoria:"auditoria", icon:"üßæ"},
      {nome: "Compliance Cont√°bil", valor: 300, categoria:"relatorio", icon:"‚úÖ"}
    ];

    function gerarTabuleiro() {
      const t = document.getElementById("tabuleiro");
      t.innerHTML = "";
      const layout = Array(121).fill("vazio");
      let ordem = [];
      for (let i = 0; i < 11; i++) ordem.push(i);
      for (let i = 1; i < 10; i++) ordem.push(i * 11 + 10);
      for (let i = 10; i >= 0; i--) ordem.push(i + 110);
      for (let i = 9; i >= 1; i--) ordem.push(i * 11);
      
      for(let i = 0; i < 121; i++){
        let casa = document.createElement("div");
        casa.classList.add("casa");
        casa.classList.add("vazio");
        t.appendChild(casa);
      }

      ordem.forEach((pos, i) => {
        const casaInfo = casas[i] || {nome:"Livre", categoria:"outros", icon:"‚¨ú"};
        const c = t.children[pos];
        c.classList.remove("vazio");
        c.classList.add(casaInfo.categoria);
        c.innerHTML = `<div class="icon">${casaInfo.icon}</div><div>${casaInfo.nome}</div>`;
      });
    }

    function startGame(){
      const p1 = document.getElementById("player1").value.trim();
      const p2 = document.getElementById("player2").value.trim();
      const p3 = document.getElementById("player3").value.trim();
      const p4 = document.getElementById("player4").value.trim();
      const error = document.getElementById("error");
      nomesJogadores = [p1, p2];
      if(p3) nomesJogadores.push(p3);
      if(p4) nomesJogadores.push(p4);
      if(nomesJogadores.length < 2){
        error.textContent = "Digite pelo menos 2 nomes.";
        return;
      }
      error.textContent = "";
      posicoes = new Array(nomesJogadores.length).fill(0);
      dinheiro = new Array(nomesJogadores.length).fill(1000);
      jogadorAtual = 0;

      document.getElementById("config").style.display = "none";
      document.querySelector("#container h1").style.display = "block";
      const tab = document.getElementById("tabuleiro");
      tab.style.display = "grid";
      gerarTabuleiro();
      atualizarRanking();
      atualizarStatus();

      document.getElementById("ranking").style.display = "flex";
      document.getElementById("painel").style.display = "flex";
    }

    function atualizarRanking(){
      const rankingDiv = document.getElementById("ranking-list");
      rankingDiv.innerHTML = "";
      // Ranking ordenado por dinheiro decrescente
      const ranking = nomesJogadores.map((nome,i) => ({nome, dinheiro: dinheiro[i], avatar: avatares[i], pos:i}));
      ranking.sort((a,b) => b.dinheiro - a.dinheiro);
      ranking.forEach((jog, idx) => {
        const div = document.createElement("div");
        div.classList.add("player-rank");
        div.innerHTML = `<div class="pos">${idx+1}</div><div class="avatar">${jog.avatar}</div><div class="info"><div class="name">${jog.nome}</div><div class="score">R$ ${jog.dinheiro}</div></div>`;
        rankingDiv.appendChild(div);
      });
    }

    function atualizarStatus(){
      const status = document.getElementById("status");
      status.textContent = `Jogador atual: ${nomesJogadores[jogadorAtual]} (R$ ${dinheiro[jogadorAtual]})`;
    }

    function jogar(){
      const dado = Math.floor(Math.random() * 6) + 1;
      alert(`Voc√™ tirou ${dado}!`);
      posicoes[jogadorAtual] = (posicoes[jogadorAtual] + dado) % casas.length;
      const casaAtual = casas[posicoes[jogadorAtual]];
      dinheiro[jogadorAtual] += casaAtual.valor;
      alert(`${nomesJogadores[jogadorAtual]} caiu na casa "${casaAtual.nome}" e ${(casaAtual.valor>=0) ? "ganhou" : "perdeu"} R$ ${Math.abs(casaAtual.valor)}.`);
      jogadorAtual = (jogadorAtual + 1) % nomesJogadores.length;
      atualizarRanking();
      atualizarStatus();
    }
  </script>
</body>
</html>
