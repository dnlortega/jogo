<!DOCTYPE html>
<html lang="pt-BR" >
<head>
  <meta charset="UTF-8" />
  <title>Monopoly Cont√°bil Profissional com Ranking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Reset e base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #e7f0fd;
      color: #222;
      display: flex;
      min-height: 100vh;
      align-items: flex-start;
      justify-content: center;
      padding: 1rem;
      gap: 1rem;
      flex-wrap: wrap;
    }
    h1, h2, p {
      margin: 0.3rem 0 1rem;
      text-align: center;
      color: #0a3d62;
      text-shadow: 1px 1px 3px #a4b0be;
    }

    /* Container geral tabuleiro + ranking */
    #app {
      display: flex;
      max-width: 900px;
      width: 100%;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    /* Container do jogo */
    #container {
      max-width: 480px;
      width: 100%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 12px 25px rgba(0,0,0,0.15);
      padding: 1rem 1.5rem 4.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      flex-shrink: 0;
    }

    /* Tabuleiro responsivo */
    #tabuleiro {
      display: grid;
      grid-template-columns: repeat(11, 1fr);
      grid-template-rows: repeat(11, 1fr);
      gap: 3px;
      width: 100%;
      max-width: 420px;
      aspect-ratio: 1 / 1;
      margin-bottom: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 15px #1e90ff66;
      background: #f0f4f9;
      user-select: none;
    }
    .casa {
      background: linear-gradient(145deg, #ffffff, #d4e0f1);
      border-radius: 8px;
      box-shadow: inset 3px 3px 6px #b8c6db,
                  inset -3px -3px 6px #ffffff;
      border: 1.5px solid #1e90ff;
      font-size: 0.75em;
      padding: 6px 5px 6px 5px;
      color: #1e3c72;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: background 0.3s ease;
      cursor: default;
      text-align: center;
      line-height: 1.1em;
      position: relative;
    }
    .casa:hover {
      background: linear-gradient(145deg, #d1e6ff, #a8cbff);
      box-shadow: 0 0 15px #5599ff;
      color: #103c9f;
    }
    .vazio {
      background: transparent;
      border: none;
      pointer-events: none;
    }
    .icon {
      font-size: 1.6em;
      margin-bottom: 4px;
      filter: drop-shadow(0 0 1px #4267b2);
      user-select: none;
    }
    .jogador {
      font-size: 1.3em;
      font-weight: 700;
      line-height: 1.1em;
      margin-top: 6px;
      color: #0a3d62;
      text-shadow: 1px 1px 1px #a0b8ff;
      word-break: break-word;
      user-select: none;
    }

    /* Cores por categoria (gradientes) */
    .imposto {
      background: linear-gradient(145deg, #ffd6d6, #ff9a9a);
      border-color: #ff5c5c;
      color: #7a0000;
    }
    .imposto:hover {
      background: linear-gradient(145deg, #ff9e9e, #ff6262);
      box-shadow: 0 0 20px #ff0000cc;
      color: #4a0000;
    }
    .auditoria {
      background: linear-gradient(145deg, #c6deff, #7abaff);
      border-color: #2b87ff;
      color: #003d7a;
    }
    .auditoria:hover {
      background: linear-gradient(145deg, #7fb8ff, #338dff);
      box-shadow: 0 0 20px #0057ffcc;
      color: #002655;
    }
    .custos {
      background: linear-gradient(145deg, #d4f4d7, #91d77f);
      border-color: #53a938;
      color: #2f5600;
    }
    .custos:hover {
      background: linear-gradient(145deg, #a3e88a, #63b72c);
      box-shadow: 0 0 20px #40a30dcc;
      color: #214300;
    }
    .relatorio {
      background: linear-gradient(145deg, #fff8cc, #ffe066);
      border-color: #ffdb4d;
      color: #7a6b00;
    }
    .relatorio:hover {
      background: linear-gradient(145deg, #ffea60, #ffcd33);
      box-shadow: 0 0 20px #f6c90ccc;
      color: #4a4200;
    }
    .outros {
      background: linear-gradient(145deg, #e4e5e7, #b3b5b9);
      border-color: #8f9297;
      color: #42464b;
    }
    .outros:hover {
      background: linear-gradient(145deg, #b1b4b9, #7a7d83);
      box-shadow: 0 0 20px #666a70cc;
      color: #222428;
    }

    /* Painel fixo no rodap√© */
    #painel {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      max-width: 480px;
      background: #0a3d62;
      color: white;
      padding: 0.9rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 -3px 10px #113f7dcc;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      font-weight: 600;
      user-select: none;
      z-index: 10;
    }
    #status {
      font-size: 1em;
      max-width: 65%;
      word-wrap: break-word;
    }
    #painel button {
      background: #1e90ff;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1.2em;
      padding: 0.6rem 1.3rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 5px 15px #1e90ffaa;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    #painel button:hover {
      background: #1266cc;
      box-shadow: 0 7px 20px #1266ccbb;
    }
    #painel button:active {
      background: #0a3d62;
      box-shadow: none;
    }

    /* Formul√°rio de configura√ß√£o */
    #config {
      width: 100%;
      max-width: 480px;
      background: white;
      padding: 1.5rem 2rem 2rem;
      border-radius: 12px;
      box-shadow: 0 12px 25px rgba(0,0,0,0.12);
      margin-bottom: 2rem;
      user-select: none;
    }
    #config h2 {
      margin-bottom: 0.5rem;
      color: #0a3d62;
      text-shadow: 1px 1px 2px #a4b0be;
    }
    #config p {
      font-size: 0.9rem;
      margin-bottom: 1rem;
      color: #334d6e;
    }
    #config input {
      width: 100%;
      font-size: 1.1em;
      padding: 0.7rem 1rem;
      margin-bottom: 1rem;
      border-radius: 8px;
      border: 2px solid #a4b0be;
      transition: border-color 0.3s ease;
      outline-offset: 2px;
      outline-color: transparent;
      color: #0a3d62;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    #config input::placeholder {
      color: #a4b0be;
      font-weight: 500;
    }
    #config input:focus {
      border-color: #1e90ff;
      outline-color: #1e90ff;
    }
    #config button {
      width: 100%;
      background: #1e90ff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 0.8rem;
      font-size: 1.2em;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 18px #1e90ffaa;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    #config button:hover {
      background: #1266cc;
      box-shadow: 0 10px 25px #1266ccbb;
    }
    #config button:active {
      background: #0a3d62;
      box-shadow: none;
    }
    #error {
      color: #cc4444;
      font-weight: 700;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
      min-height: 1.3em;
      text-align: center;
      user-select: none;
    }

    /* Ranking lateral */
    #ranking {
      background: white;
      border-radius: 16px;
      box-shadow: 0 14px 30px rgba(0,0,0,0.15);
      padding: 1rem 1.5rem;
      max-width: 300px;
      width: 100%;
      flex-shrink: 0;
      user-select: none;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      height: fit-content;
    }
    #ranking h2 {
      color: #0a3d62;
      text-shadow: 1px 1px 2px #a4b0be;
      margin-bottom: 0.8rem;
      font-weight: 800;
      font-size: 1.5rem;
    }
    .player-rank {
      background: #f0f7ff;
      border-radius: 12px;
      box-shadow: inset 2px 2px 6px #c7d9ff,
                  inset -2px -2px 6px #ffffff;
      padding: 0.7rem 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      font-weight: 700;
      color: #1e3c72;
      transition: background 0.3s ease;
      border-left: 6px solid transparent;
    }
    .player-rank:hover {
      background: #d2e3ff;
      border-left-color: #1e90ff;
      cursor: default;
    }
    .player-rank .avatar {
      font-size: 2.3rem;
      text-shadow: 1px 1px 2px #8fbaff;
      user-select: none;
      width: 48px;
      text-align: center;
    }
    .player-rank .info {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      flex-grow: 1;
    }
    .player-rank .info .name {
      font-size: 1.2rem;
      color: #0a3d62;
      font-weight: 800;
    }
    .player-rank .info .score {
      font-size: 1rem;
      color: #4a6ca8;
      font-weight: 600;
    }
    .player-rank .pos {
      font-weight: 900;
      font-size: 1.4rem;
      width: 28px;
      text-align: center;
      color: #0a3d62;
      user-select: none;
    }

    /* Scroll interno para ranking se muita altura */
    #ranking {
      max-height: 480px;
      overflow-y: auto;
    }

    /* Responsividade */
    @media (max-width: 850px) {
      #app {
        flex-direction: column;
        align-items: center;
      }
      #ranking {
        max-width: 480px;
        width: 90vw;
        margin-bottom: 1rem;
      }
      #container {
        max-width: 480px;
        width: 90vw;
      }
      #painel {
        max-width: 90vw !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="container">
      <div id="config">
        <h2>Configurar Jogadores</h2>
        <p>Digite os nomes dos jogadores (m√≠nimo 2, m√°ximo 4):</p>
        <input type="text" id="player1" placeholder="Nome do jogador 1" />
        <input type="text" id="player2" placeholder="Nome do jogador 2" />
        <input type="text" id="player3" placeholder="Nome do jogador 3 (opcional)" />
        <input type="text" id="player4" placeholder="Nome do jogador 4 (opcional)" />
        <button onclick="startGame()">Come√ßar Jogo</button>
        <p id="error"></p>
      </div>

      <h1 style="display:none;">Monopoly Cont√°bil</h1>
      <div id="tabuleiro" style="display:none;"></div>
    </div>

    <aside id="ranking" style="display:none;">
      <h2>Ranking</h2>
      <div id="ranking-list"></div>
    </aside>
  </div>

  <div id="painel" style="display:none;">
    <p id="status"></p>
    <button onclick="jogar()">üé≤ Jogar Dado</button>
  </div>

  <script>
    let nomesJogadores = [];
    let avatares = ["üòÄ", "üòé", "ü§ì", "ü§ë"];
    let posicoes = [];
    let dinheiro = [];
    let jogadorAtual = 0;

    const casas = [
      {nome: "Imposto de Renda", valor: -200, categoria:"imposto", icon:"üí∏"},
      {nome: "Auditoria Fiscal", valor: -150, categoria:"auditoria", icon:"üïµÔ∏è‚Äç‚ôÇÔ∏è"},
      {nome: "Contabilidade de Custos", valor: 100, categoria:"custos", icon:"üìä"},
      {nome: "Balancete", valor: 50, categoria:"relatorio", icon:"üìà"},
      {nome: "Escritura√ß√£o Fiscal", valor: -100, categoria:"imposto", icon:"üßæ"},
      {nome: "Concilia√ß√£o Banc√°ria", valor: 200, categoria:"custos", icon:"üè¶"},
      {nome: "Planejamento Tribut√°rio", valor: 150, categoria:"imposto", icon:"üóÇÔ∏è"},
      {nome: "An√°lise de Balan√ßos", valor: -50, categoria:"relatorio", icon:"üîç"},
      {nome: "Folha de Pagamento", valor: -100, categoria:"custos", icon:"üí∞"},
      {nome: "Controle Patrimonial", valor: 200, categoria:"custos", icon:"üè¢"},
      {nome: "Invent√°rio", valor: -50, categoria:"auditoria", icon:"üì¶"},
      {nome: "Auditoria Interna", valor: -150, categoria:"auditoria", icon:"üßê"},
      {nome: "Relat√≥rio Gerencial", valor: 100, categoria:"relatorio", icon:"üìë"},
      {nome: "ICMS", valor: -200, categoria:"imposto", icon:"üè∑Ô∏è"},
      {nome: "ISS", valor: -100, categoria:"imposto", icon:"üõéÔ∏è"},
      {nome: "PIS/COFINS", valor: -150, categoria:"imposto", icon:"üìÉ"},
      {nome: "Nota Fiscal Eletr√¥nica", valor: 50, categoria:"custos", icon:"üíª"},
      {nome: "An√°lise de Demonstrativos", valor: 100, categoria:"relatorio", icon:"üìã"},
      {nome: "DRE", valor: 200, categoria:"relatorio", icon:"üìä"},
      {nome: "Balan√ßo Patrimonial", valor: 300, categoria:"relatorio", icon:"üèõÔ∏è"},
      {nome: "IRPJ", valor: -200, categoria:"imposto", icon:"üíµ"},
      {nome: "Lucro Real", valor: 150, categoria:"custos", icon:"üìà"},
      {nome: "Lucro Presumido", valor: 100, categoria:"custos", icon:"üìâ"},
      {nome: "DCTF", valor: -150, categoria:"imposto", icon:"üìÇ"},
      {nome: "SPED Cont√°bil", valor: -100, categoria:"auditoria", icon:"üñ•Ô∏è"},
      {nome: "SPED Fiscal", valor: -200, categoria:"imposto", icon:"üñ®Ô∏è"},
      {nome: "Simples Nacional", valor: 200, categoria:"custos", icon:"üßÆ"},
      {nome: "Encerramento de Exerc√≠cio", valor: 100, categoria:"relatorio", icon:"üìÜ"},
      {nome: "Ativo Imobilizado", valor: -150, categoria:"custos", icon:"üèóÔ∏è"},
      {nome: "Controle de Estoque", valor: 150, categoria:"custos", icon:"üì¶"},
      {nome: "Auditoria Externa", valor: -200, categoria:"auditoria", icon:"üîé"},
      {nome: "Custo de Produ√ß√£o", valor: 100, categoria:"custos", icon:"üè≠"},
      {nome: "Margem de Contribui√ß√£o", valor: 200, categoria:"custos", icon:"üíπ"},
      {nome: "Ponto de Equil√≠brio", valor: 150, categoria:"custos", icon:"‚öñÔ∏è"},
      {nome: "Provis√µes Cont√°beis", valor: -100, categoria:"auditoria", icon:"üìú"},
      {nome: "Obriga√ß√µes Trabalhistas", valor: -150, categoria:"imposto", icon:"üßæ"},
      {nome: "Despesas Antecipadas", valor: 50, categoria:"custos", icon:"üí≥"},
      {nome: "Receitas Diferidas", valor: 100, categoria:"relatorio", icon:"üìÑ"},
      {nome: "Ajustes Cont√°beis", valor: -50, categoria:"auditoria", icon:"üßæ"},
      {nome: "Compliance Cont√°bil", valor: 300, categoria:"relatorio", icon:"‚úÖ"}
    ];

    function gerarTabuleiro() {
      const t = document.getElementById("tabuleiro");
      t.innerHTML = "";
      const layout = Array(121).fill("vazio");
      let ordem = [];
      for (let i = 0; i < 11; i++) ordem.push(i);
      for (let i = 1; i < 10; i++) ordem.push(i*11+10);
      for (let i = 10; i >= 0; i--) ordem.push(110+i);
      for (let i = 9; i > 0; i--) ordem.push(i*11);
      ordem.forEach((pos, idx) => layout[pos] = idx);
      layout.forEach(cell => {
        const div = document.createElement("div");
        if (cell === "vazio") {
          div.className = "vazio";
        } else {
          div.className = "casa " + casas[cell].categoria;
          div.innerHTML = `<div class="icon" title="${casas[cell].nome}">${casas[cell].icon}</div>
                           <div>${casas[cell].nome}</div>
                           <div>${casas[cell].valor>0?'+':'-'}R$${Math.abs(casas[cell].valor)}</div>`;
          posicoes.forEach((p, idx) => {
            if (p === cell) {
              div.innerHTML += `<div class='jogador'>${avatares[idx]}<br>${nomesJogadores[idx]}</div>`;
            }
          });
        }
        t.appendChild(div);
      });
    }

    function atualizarRanking() {
      const rankDiv = document.getElementById("ranking-list");
      rankDiv.innerHTML = "";
      let ranking = nomesJogadores.map((nome, i) => ({
        nome,
        avatar: avatares[i],
        dinheiro: dinheiro[i]
      }));
      ranking.sort((a,b) => b.dinheiro - a.dinheiro);
      ranking.forEach((player, idx) => {
        const div = document.createElement("div");
        div.className = "player-rank";
        div.innerHTML = `<div class="pos">${idx+1}</div>
                         <div class="avatar" title="${player.nome}">${player.avatar}</div>
                         <div class="info">
                           <div class="name">${player.nome}</div>
                           <div class="score">R$${player.dinheiro}</div>
                         </div>`;
        rankDiv.appendChild(div);
      });
    }

    function jogar() {
      const dado = Math.floor(Math.random()*6)+1;
      posicoes[jogadorAtual] = (posicoes[jogadorAtual] + dado) % 40;
      dinheiro[jogadorAtual] += casas[posicoes[jogadorAtual]].valor;
      document.getElementById("status").textContent = `${nomesJogadores[jogadorAtual]} (${avatares[jogadorAtual]}) tirou ${dado} - ${casas[posicoes[jogadorAtual]].nome} (${casas[posicoes[jogadorAtual]].valor>0?'+':'-'}R$${Math.abs(casas[posicoes[jogadorAtual]].valor)}) | Saldo: R$${dinheiro[jogadorAtual]}`;
      jogadorAtual = (jogadorAtual + 1) % posicoes.length;
      gerarTabuleiro();
      atualizarRanking();
    }

    function startGame() {
      const p1 = document.getElementById("player1").value.trim();
      const p2 = document.getElementById("player2").value.trim();
      const p3 = document.getElementById("player3").value.trim();
      const p4 = document.getElementById("player4").value.trim();
      const error = document.getElementById("error");

      let nomes = [p1, p2];
      if (p3) nomes.push(p3);
      if (p4) nomes.push(p4);

      if (nomes.length < 2) {
        error.textContent = "Digite ao menos 2 nomes para come√ßar.";
        return;
      }
      if (nomes.some(n => n.length < 1)) {
        error.textContent = "Todos os nomes preenchidos devem ter ao menos 1 caractere.";
        return;
      }

      nomesJogadores = nomes;
      posicoes = new Array(nomesJogadores.length).fill(0);
      dinheiro = new Array(nomesJogadores.length).fill(1500);
      jogadorAtual = 0;
      error.textContent = "";

      document.getElementById("config").style.display = "none";
      document.querySelector("h1").style.display = "block";
      document.getElementById("tabuleiro").style.display = "grid";
      document.getElementById("painel").style.display = "flex";
      document.getElementById("ranking").style.display = "flex";

      gerarTabuleiro();
      atualizarRanking();
    }
  </script>
</body>
</html>
